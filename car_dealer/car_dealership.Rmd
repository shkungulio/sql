---
title: "Car Dealer Database"
output: github_document
date: "2025-05-23"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# Install necessary libraries
library(dotenv)
library(RPostgres)
```

```{r connections, include=FALSE}
# Install if not already
#install.packages("ini")

# Load the package
library(ini)

# Read config
config <- read.ini("db_config.ini")
db <- config$postgresql

# Connect using RPostgreSQL or RPostgres
library(RPostgres)
con <- dbConnect(
  Postgres(),
  host = db$host,
  dbname = db$database,
  user = db$user,
  password = db$password,
  port = as.integer(db$port)
)
```

Create database schema **car_dealer**
```{r create_schema}
tryCatch({
  # write operation
  schema_query <- "CREATE SCHEMA IF NOT EXISTS car_dealer;"
  dbExecute(con, schema_query)
}, error = function(e) {
  message("Error: ", e$message)
})
```

Create tables into the car_dealer schema
```{r cars_table}
cars_table_query <- "
  CREATE TABLE IF NOT EXISTS car_dealer.cars (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    department VARCHAR(50),
    hire_date DATE,
    salary NUMERIC(10, 2)
);
"
dbExecute(con, cars_table_query)
#dbWriteTable(con, cars_table_query)
```
















```{r disconnect, include=FALSE}
dbDisconnect(con)
```
